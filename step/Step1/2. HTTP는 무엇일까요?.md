# HTTP는 무엇일까요?
HyperText Transfer Protocol

**텍스트 기반**의 통신 규약으로 인터넷에서 데이터를 주고 받을 수 있는 프로토콜이다. <br>
프로그램을 이 규약에 맞춰 개발하여 서로 정보를 교환할 수 있다.

---
##### [1. HTTP 동작](1.-HTTP-동작)
##### [2. HTTP 특징](2.-HTTP-특징)
##### * [2-1. HTTP의 비연결성](2-1.-HTTP의-비연결성-(connectionless))
##### * [2-2. 무상태](2-2.-무상태-(stateless))
##### [3. HTTP 응답상태](2.-응답-상태코드)

---

## 1. HTTP 동작

클라이언트는 브라우저를 통해 서비스를 요청하면, 서버에서 해당 요청사항에 맞는 결과를 찾아 클라이언트에게 응답하는 형태로 동작한다. <br/>
HTML 문서만이 HTTP 통신을 위한 유일한 정보 문서는 아니며, 'plain text'를 통해서 JSON 데이터 및 XML과 같은 형태의 정보도 주고 받을 수 있다. <br/>
`plain text란 그래픽 표현이나 오브젝트가 아닌 읽을 수 있는 자료의 문자열만을 대표하는 데이터이다.`

--- 

## 2. HTTP 특징

2-1. HTTP는 연결 상태를 유지하지 않는 비연결성 프로토콜이다. (비연결성 단점을 해결하기 위해 Cookie와 Session이 등장하였다.) <br>
HTTP 메시지는 HTTP 서버와 HTTP 클라이언트의 의해 해석 된다. <br/>
TCP/IP를 이용하는 응용 프로토콜이다.<br/>

HTTP는 연결을 유지하지 않는 프로토콜이기 때문에 요청과 응답 방식으로 동작한다. <br/>

---

### 2-1. HTTP의 비연결성 (Connectionless)
비연결성은 클라이언트와 서버가 연결을 맺은 후, 클라이언트에 요청에 대해 서버가 응답을 마치면 연결을 해제하는 성질이다. <br/>

**비연결성의 장점** <br/>
다수의 클라이언트 연결을 유지하면 서버 자원은 그만큼 사용되기 때문에, 연결을 해제하여 자원을 효과적으로 관리할 수 있다. <br/>

**비연결성의 단점** <br/>
연결을 해제함으로써 서버는 클라이언트를 기억하지 못하고 새로운 연결 및 해제 과정을 거치게 되어 **오버헤드가 발생**할 수 있다. <br/>

>해결방법: 오버헤드를 줄이기 위해 HTTP의 KeepAlive 속성을 사용할 수 있다. <br/>
>KeepAlive는 지정된 시간동안 서버와 클라이언트간에 패킷 교환이 없을 경우, 패킷을 보내어 상태를 확인하고 응답이 없을 때 연결을 해제한다. <br/>
>하지만 KeepAlive는 주기적으로 상태를 체크하기 때문에 자원을 소모하기 때문에 완벽한 해결책은 아니다. </br>
>[KeepAlive구현해보기](https://kkundi.tistory.com/36)

---

### 2-2. 무상태 (Stateless)
Connectionless로 인해 서버는 클라이언트를 식별할 수 없다. 이를 무상태라 한다. <br/>
__이는 매번 새로운 인증 과정을 거처야 하는 번거로움이 있다.__

---

### 2-3. 비연결성
**상태를 기억하는 방법 - 쿠키** <br/>
서버가 클라이언트를 기억하기 위해 브라우저 단에서 쿠키를 저장할 수 있다. <br/>
쿠키는 사용자의 개인 장치에 저장되는 텍스트 파일이다. <br/>
쿠키는 사용자 인증 시간을 명시할 수 있으며, 유효시간 동안 브라우저를 닫아도 인증이 유지된다. <br/>
<br/>
> 쿠키는 사용자 브라우저에 저장되기 때문에 위조나 변조의 가능성이 높아 보안에 취약하다. <br/>
> 구성요소 : 이름(쿠키 구별자), 값, 유효시간, 도메인(쿠키를 전송할 도메인), 경로(쿠키를 전송할 요청 경로) <br/>
[쿠키 구현해보기](...) <br/>

**상태를 기억하는 방법 - 세션** <br/>
세션은 사용자 정보를 서버에 저장한다.

> 세션은 공격자에 의해 탈취될 수 있으며, 서버 자원을 사용하기 때문에 사용자가 많을 경우 과부하의 원인이 된다.

**상태를 기억하는 방법 - 토큰** <br/>
쿠키와 세션의 문제점을 보완하기 위해 토큰 기반의 인증방식이 도입되었다. <br/>
보호할 데이터를 토큰으로 치환하여 원본 데이터 대신 토큰을 사용하는 기술이다. <br/>
중간에 토큰을 탈취당하더라도 데이터에 대한 정보를 알 수 없으므로 보안성이 높은 기술이다. <br/>
대표적인 방법으로 OAuth, JWT가 있다. <br/>

> 무조건 토큰 방식이 좋은 것은 아니며, 사용하는 서비스의 따라 기술 특징을 이해하여 사용해야 한다.

**HTTP의 특징과 쿠키와 세션을 사용하는 이유**
쿠키와 세션은 클라이언트의 인증을 유지하기 위해 사용한다.
이유는 HTTP 프로토콜이 connectionless와 stateless한 특성이 있기 때문이다.
인증을 유지하는 수단이 없다면, 사용자는 페이지를 이동할 때마다 인증 절차를 거쳐야 한다.

--- 

### 3. 응답 상태코드
클라이언트가 서버에게 요청하면 서버는 요청에 대한 처리상태를 숫자로 반환하는데, 이를 응답코드라 한다.

> 100-109 : 메시지 정보 <br/>
> 200-206 : 요청성공 <br/>
> 300-305 : 리다이렉션 <br/>
> 400-415 : 클라이언트 에러 <br/>
> 500-505 : 서버 에러 <br/>

에러 메시지는 API 개발 시 올바른 상태 코드로 응답해줘야 한다. <br/>
사용자의 요청 파라미터로 인해 발생한 오류를 서버 에러인 500 에러가 아닌, 403 에러를 응답 코드로 보내줘야 한다. <br/>
이러한 HTTP 응답코드는 약속이며, 모두가 이해할 수 있는 올바른 코드로 응답하는 것이 중요하다.


[HTTP란](https://velog.io/@surim014/HTTP%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80) <br/>
[HTTP특성](https://victorydntmd.tistory.com/286) <br/>
[쿠키와세션](https://https://victorydntmd.tistory.com/34)
