# 개요
브라우저는 서버에 요청을 보내기 위해서 HTTP 메시지를 생성하고 전송하는데 이 때 전송할 서버의 주소를 알기 위해 도메인 이름의 IP주소를 조사한다. 
IP 주소는 DNS 서버에서 조회할 수 있는데 DNS 서버에 접근하기 위해 OS의 Socket 라이브러리에 포함된 Resolver 메서드를 사용하게 된다. 
Resolver 메서드는 DNS 서버에 도메인명이 할당된 IP주소를 요청한다.

# DNS(Domain Name System)
DNS는 사람들에게는 쉽게 기억될 수 있게 도입되었으나, 왜 IP주소가 아닌 문자로 주소를 주고 받을 수 없는가에 대한 의문을 남기곤 한다.
문자는 byte의 크기가 IP주소보다 크기 때문에 라우터에 과부하를 주어 처리를 지연되게 한다.

# DNS와 Resolver
DNS는 IP주소를 조회하기 위해 DNS 서버에 접근해야 하는데, DNS 클라이언트는 Resovler라고 한다. <br/>
DNS 원리를 사용해 IP주소를 조회하는 것은 Name Resolution이라고 한다. <br/>
Resolver는 이 Resolution을 실행한다. <br/>
Resolver는 OS의 Socket 라이브러리에 포함되어 있다. Socket라이브러리는 네트워크 기능을 호출하기 네트워크용 표준 라이브러리이다. <br/>
Resolver를 통해 DNS 서버에 해당 주소를 조회 후 응답메시지를 받고 메시지 안에 주소를 브라우저의 메모리 영역에 넣는다. <br/>

**도메인명에서 ip주소를 조회할 때 Socket 라이브러리의 Resolver를 이용한다.**

송신 동작은 Resolver가 스스로 실행되는 것이 아닌 OS의 프로토콜 스택을 통해 이루어진다. <br/>
Resolver는 OS 동작을 호출하기 위한 수단일 뿐 송수신 기능이 없기 때문이다.

# DNS 서버 동작
DNS 서버의 기본 동작은 클라이언트로부터 조회 메시지를 받아 서버 내에 리소스 레코드에서 등록된 정보를 찾는다. <br/>
<br/>
메시지 정보는 **이름, 클래스, 타입** 으로 나뉜다. <br/>
이름은 서버나 메일의 목적지와 같은 이름이다.<br/>
클래스는 네트워크 정보인데 인터넷만 사용하기 때문에 'IN' 만 쓰인다. <br/>
타입은 IP 주소인지 메일 배송 목적지인지 구분한다. (A타입 : IP / MX타입 : 메일 배송 목적지) <br/>
(mx : mail exchange)

```
Example :
<A 타입 조회 메시지 송신>
이름 : www.test.com
클래스 : IN
타입 : A

<A 타입 조회 메시지 회답>
www.test.com 이름에 대응하는 IP 주소 회답(192.0.0.0)

<MX 타입 조회 메시지 송신>
메일 서버를 조사할 경우에는 @ 뒤에 있는 이름이 메일 배송 목적지가 된다.
test@naver.com 

이름 : naver.com
클래스 : IN
타입 : MX
```

웹 서버 뿐만 아니라 메일 서버나 데이터베이스 서버 등 어떤 서버에서도 A 타입으로 주소를 등록하면 그것이 서버의 이름이 된다. <br/>


# 도메인 계층
DNS 서버에서의 등록된 정보는 분산되어 다수의 DNS 서버에 등록되어 있고 이를 다수의 DNS 서버가 연대한 구조이다. <br/>
도메인명은 .을 통해 계층을 구분하는데 이는 DNS 서버의 도메인 계층이 된다. <br/>

클라이언트가 DNS 주소를 조회할 때 가장 가까운 서버에 질의하고 서버는 다수의 DNS 서버들에 질의를 거쳐 조회 메시지에 맞는 IP 주소를 찾고 클라이언트에 회답하게 된다. <br/>

# DNS 서버의 캐시 기능
캐시는 한 번 접근했던 데이터를 저장하여 다시 접근할 때 고속으로 접근하기 위한 기술이다. <br/>
DNS 서버는 캐시를 기록할 수 있는데, 캐시에 등록된 정보는 변경될 수 있는 정보이기 때문에 유효기한을 설정해야 한다.
(DNS서버는 캐시 정보를 조회할 것인지 DNS 서버의 정보를 조회할 것인지 알려준다)



